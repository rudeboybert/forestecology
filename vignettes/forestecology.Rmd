---
title: '"Methods and data for forest ecology: The `forestecology` package"'
date: "`r Sys.Date()`"
# To produce blinded version set to 1:
blinded: "`r blinded <- 1; blinded;`"
# Author info:
author: "Albert Y. Kim and David Allen"
authors: 
- name: Albert Y. Kim 
  orcid: 0000-0001-7824-306X
  thanks: "Albert Y. Kim is Assistant Professor, Statistical & Data Sciences, Smith College, Northampton, MA 01063 (e-mail: akim04@smith.edu)."
  affiliation: Program in Statistical & Data Sciences Smith College, Northampton, MA, USA.
- name: David Allen
  orcid: 
  affiliation: Biology Department, Middlebury College, Middlebury, VT, USA.
# Paper info:
abstract: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
bibliography: TreeCompBibTex.bib
biblio-style: besjournals
# Output info:
output:
  rticles::asa_article:
  rmarkdown::html_vignette:
    df_print: default
    number_sections: no
link-citations: yes
header-includes:
- \usepackage{fancyhdr, amsmath, amssymb}
vignette: >
  %\VignetteEncoding{UTF-8}
  %\VignetteIndexEntry{Methods and data for forest ecology: The `forestecology` package}
  %\VignetteEngine{knitr::rmarkdown}
---

<!--
MEE instructions:
https://besjournals.onlinelibrary.wiley.com/hub/journal/2041210X/author-guidelines
-->



# Summary

1. Point 1: set the context for and purpose of the work;
1. Point 2: indicate the approach and methods;
1. Point 3: outline the main results;
1. Point 4: identify the conclusions and the wider implications.



# Keywords

A list in alphabetical order not exceeding eight words or short phrases. The most important key-words should appear in the title and the abstract as well as the key-word list. More advice on selecting good keywords can be found here.

forest ecology, tideverse



# Introduction

This should state the reason for doing the work, the nature of the hypothesis or hypotheses under consideration, and should outline the essential background.

* We are crossvalidating here



# Materials and Methods

Include sufficient details for the work to be repeated. Where specific equipment and materials are named, the manufacturer’s details (name, city and country) should be given so that readers can trace specifications by contacting the manufacturer. Where commercially available software has been used, details of the supplier should be given in brackets or the reference given in full in the reference list. Do not describe or refer to commonplace statistical tests in this section but allude to them briefly in Results.

## Input data formatting

* Two censuses, trees are linked between censuses
* Variables:
    + dbh \textit{as numerical}
    + (x, y) coordinates \textit{as numerical}
    + identification/grouping classification (trait-based clustering, phylogenetic family, or actual species) as \textit{as factor} (crucial so that there is a running record of which species are considered, in particular when crossvalidating a rare species that might not show up in training test but does show up in test set)
* Pre-processing: it is up to user to process codes and remove trees/rows accordingly

## Spatial formatting/preparation

* `define_buffer()`: For each buffer defines focal trees of study region , show plot, how we define this, `max_dist` informed by biology, 
* `define_cv_grid()`: define crossvalidation folds, size + show plot


## Model specification

* Model formula: Growth as a function of 
* `create_growth_df()`. Inputs:
    + two `census_df`s. The format it specified
    + A linking varaible to link individuals between the two `census_df`s
    + A `species_df`


* `get_model_specs()`. Inputs:
    + define identification/grouping classification
    + `growth_df` format
* `create_focal_and_comp()`. Inputs:
    + `growth_df`
    + `max_dist`: who are your competitors
    + `model_specs`: grouping of competitor biomasses

## Model fit and prediction

* `fit_bayesian_model()`. 
    + Inputs: `focal_and_comp`, `model_specs`
    + Output: `posterior_param`
* `predict_bayesian_model()`. 
    + Inputs: `focal_and_comp`, `model_specs`, `posterior_param`
    + Output: `focal_and_comp` with updated `growth_hat` variable
* Show observed vs predicted growth
* CV: `run_cv()` is a wrapper to `fit_bayesian_model()` and `predict_bayesian_model()`. 
* Permutation test:
  + Add line to that shuffles competitor species within `focal_and_comp` just before fitting model
  + permutation AND CV: add `run_shuffle` argument to `run_cv()`

## Model output and performance

* Make plot posterior parameter functions





# Results

State the results and draw attention in the text to important details shown in tables and figures.





# Discussion

This should point out the significance of the results in relation to the reasons for doing the work, and place them in the context of other work.





# Conclusions





# Acknowledgements

A brief statement acknowledging collaborators and research assistants who do not meet the criteria for authorship described above, or acknowledging funding sources, providing relevant permit numbers (including institutional animal use permits), or giving recognition to nature reserves or other organizations that made the work possible.





# Authors’ contributions





# Data Availability




# Data sources (optional)




# References
